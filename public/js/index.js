function init(){$("#userList").data("user",123),console.log($("#userList").data("user"))}function renderTpl(e,n){var t=$("script[data-tpl='"+e+"']");return t?(TPL[e]||(TPL[e]=Hogan.compile(t.html(),HOGANCONFIG)),TPL[e].render(n)):!1}function bindEvent(){$("#btnLoad").on("click",function(){$.when(getUser()).done(function(e){var n=renderTpl("userinfo",e);$("#userList").append(n)}).fail(function(e){console.log(e)}).always(function(){console.log("always")})}),$("#btnSet").on("click",function(){$.when(setUser()).done(function(e){alert(e)}).fail(function(e){console.log(e)}).always(function(){console.log("always")})})}function getUser(){var e=$.Deferred();return $.get("/users/getUser",{uid:1},function(n){"ok"==n.state?e.resolve(n.data):e.reject("get data error")}),e}function setUser(){var e=$.Deferred();return $.post("/users/setUser",{uid:1,age:19},function(n){"ok"==n.state?e.resolve(n.data):e.reject("set data error")}),e}var TPL={},HOGANCONFIG={delimiters:"<% %>"};$(document).ready(function(){init(),bindEvent()});